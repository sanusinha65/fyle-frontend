<div class=" bg-gray-200 min-h-full">
  <app-header></app-header>
  <div class="container mx-auto px-4 py-6"> 
    <div class="flex flex-wrap justify-evenly">
      <div class="w-full md:w-1/2 lg:w-1/3 xl:w-1/3 p-4">
        <div class="max-w-sm rounded overflow-hidden shadow-lg bg-white p-6 rounded-3xl group hover:bg-indigo-600">
          <div class="px-6 py-4">
            <p class="font-bold group-hover:text-white text-3xl mb-2">{{workoutUsers}}</p>
            <p class="font-bold text-xl mb-2 text-gray-600 group-hover:text-white">Total Users</p>
          </div>
        </div>
      </div>
      <div class="w-full md:w-1/2 lg:w-1/3 xl:w-1/3 p-4">
        <div class="max-w-sm rounded overflow-hidden shadow-lg bg-white p-6 rounded-3xl group hover:bg-indigo-600">
          <div class="px-6 py-4">
            <p class="font-bold text-3xl mb-2 group-hover:text-white">{{workoutTime}}</p>
            <div class="font-bold text-xl mb-2 text-gray-600  group-hover:text-white">Total Time</div>
          </div>
        </div>
      </div>
      <div class="w-full md:w-1/2 lg:w-1/3 xl:w-1/3 p-4">
        <div class="max-w-sm rounded overflow-hidden shadow-lg bg-white p-6 rounded-3xl group hover:bg-indigo-600">
          <div class="px-6 py-4">
            <p class="font-bold text-3xl mb-2 group-hover:text-white">{{workoutTypes}}</p>
            <div class="font-bold text-xl mb-2 text-gray-600  group-hover:text-white">Total Types</div>
          </div>
        </div>
      </div>
    </div>
    <div class="w-full p-4 bg-white rounded-3xl">
      <div class="flex flex-wrap justify-between">
        <div class="w-1/3">
          <label for="searchBar" class="block text-gray-700">Search</label>
          <input type="text" [(ngModel)]="searchText" placeholder="Enter Username..." id="searchBar"
            class="mt-1 block w-1/2 px-3 py-2 border border-gray-300 shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"
            (input)="applyFilter()">
        </div>
        <div  class="w-1/3">
          <label for="filterWorkOut" class="block text-gray-700">Filter</label>
          <select [(ngModel)]="selectedName">
            <option value="all">All</option>
            <ng-container *ngFor="let name of uniqueWorkoutTypes">
              <option  [value]="name">{{ name }}</option>
            </ng-container>
          </select>                
        </div>
      </div>
      <table class="table-fixed  shadow-lg w-full">
        <thead>
          <tr>
            <th class="w-1/3 py-2 px-4 text-left">S. No.</th>
            <th class="w-1/3 py-2 px-4 text-left">Name</th>
            <th class="w-1/3 py-2 px-4 text-left">Workouts</th>
            <th class="w-1/3 py-2 px-4 text-left">Number of Workouts</th>
            <th class="w-1/3 py-2 px-4 text-left">Total Workout Minutes</th>
          </tr>
        </thead>
        <tbody>
          <ng-container *ngIf="filteredUserData.length > 0; else noData">
            <tr class="even:bg-white odd:bg-gray-200" *ngFor="let user of filteredUserData; let i = index">
              <td class="py-2 px-4 text-left">{{ i + 1 }}</td>
              <td class="py-2 px-4 text-left">{{ user.name }}</td>
              <td class="py-2 px-4 text-left">
                <ng-container *ngFor="let workout of user.workouts; let last = last">
                  {{ workout.type }}
                  <span *ngIf="!last">, </span>
                </ng-container>
              </td>
              <td class="py-2 px-4 text-left">{{ user.workouts.length }}</td>
              <td class="py-2 px-4 text-left">{{ getTotalWorkoutMinutes(user.workouts) }}</td>
            </tr>
          </ng-container>
          <ng-template #noData>
            <tr>
              <td colspan="5" class="py-2 px-4 text-center">No data found</td>
            </tr>
          </ng-template>
        </tbody>                      
      </table>
    </div>
  </div>
</div>